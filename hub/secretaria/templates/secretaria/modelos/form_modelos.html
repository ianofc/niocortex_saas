{% extends "social/base.html" %}

{% block title %}{{ titulo }}{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto animate-fade-in-down">
    
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white">{{ titulo }}</h1>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <div class="lg:col-span-2">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 p-6">
                <form method="POST" class="space-y-5">
                    {% csrf_token %}
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Título do Documento</label>
                            {{ form.titulo }}
                        </div>
                        <div>
                            <label class="form-label">Tipo</label>
                            {{ form.tipo }}
                        </div>
                    </div>

                    <div>
                        <label class="form-label flex justify-between">
                            Conteúdo (HTML Aceite)
                            <span class="text-xs font-normal text-gray-400">Use as variáveis ao lado</span>
                        </label>
                        {{ form.conteudo }}
                        <p class="text-xs text-gray-400 mt-1">Dica: Você pode colar tabelas ou HTML formatado aqui.</p>
                    </div>

                    <div class="pt-4 flex justify-end gap-3 border-t border-gray-100 dark:border-gray-700">
                        <a href="{% url 'secretariat:listar_modelos' %}" class="btn-secondary">Cancelar</a>
                        <button type="submit" class="btn-primary">Salvar Modelo</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="lg:col-span-1">
            <div class="bg-indigo-50 dark:bg-gray-700/50 rounded-xl p-6 border border-indigo-100 dark:border-gray-600 sticky top-6">
                <h3 class="font-bold text-indigo-900 dark:text-white mb-3 flex items-center gap-2">
                    <i class="fas fa-code"></i> Variáveis Dinâmicas
                </h3>
                <p class="text-sm text-indigo-700 dark:text-gray-300 mb-4">
                    Copie e cole estes códigos no conteúdo. Eles serão substituídos pelos dados reais na emissão.
                </p>

                <div class="space-y-3">
                    <div class="group cursor-pointer" onclick="navigator.clipboard.writeText('{{ aluno.nome }}')">
                        <code class="text-xs font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 text-pink-600 group-hover:bg-pink-50 transition">
                            {{ '{{' }} aluno.nome {{ '}}' }}
                        </code>
                        <span class="text-xs text-gray-500 block">Nome Completo do Aluno</span>
                    </div>

                    <div class="group cursor-pointer">
                        <code class="text-xs font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 text-pink-600">
                            {{ '{{' }} aluno.cpf {{ '}}' }}
                        </code>
                        <span class="text-xs text-gray-500 block">CPF do Aluno</span>
                    </div>

                    <div class="group cursor-pointer">
                        <code class="text-xs font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 text-pink-600">
                            {{ '{{' }} aluno.data_nascimento {{ '}}' }}
                        </code>
                        <span class="text-xs text-gray-500 block">Data de Nascimento</span>
                    </div>

                    <div class="group cursor-pointer">
                        <code class="text-xs font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 text-pink-600">
                            {{ '{{' }} data_hoje {{ '}}' }}
                        </code>
                        <span class="text-xs text-gray-500 block">Data atual (Extenso)</span>
                    </div>
                    
                     <div class="group cursor-pointer">
                        <code class="text-xs font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 text-pink-600">
                            {{ '{{' }} escola.nome {{ '}}' }}
                        </code>
                        <span class="text-xs text-gray-500 block">Nome da Instituição</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}