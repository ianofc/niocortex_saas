{% load static %}
<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NioCortex - YourLife+</title>
    
    <script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>

    <script src="https://cdn.tailwindcss.com"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Plus Jakarta Sans', 'sans-serif'], 
                        display: ['Outfit', 'sans-serif'] 
                    },
                    colors: { 
                        primary: '#7c3aed', 
                        secondary: '#0ea5e9', 
                        text: '#1e293b' 
                    },
                    animation: { 
                        float: 'float 6s ease-in-out infinite',
                        'pulse-gold': 'pulse-gold 2s infinite',
                        'fade-in': 'fadeIn 0.3s ease-out'
                    },
                    keyframes: { 
                        float: { 
                            '0%, 100%': { transform: 'translateY(0)' }, 
                            '50%': { transform: 'translateY(-10px)' } 
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* --- TEMAS (VARI√ÅVEIS CSS) --- */
        :root, body.theme-aurora { 
            --bg-body: #f8fafc; 
            --bg-card: rgba(255, 255, 255, 0.9); 
            --text-main: #1e293b; 
            --text-muted: #64748b; 
            --primary: #7c3aed; 
            --border-color: rgba(255, 255, 255, 0.6); 
            
            --color-primary: #7c3aed;
            --color-secondary: #0ea5e9;
            --gradient-sidebar: linear-gradient(135deg, #7c3aed 0%, #0ea5e9 100%);
        }

        /* Temas Adicionais (Dark/Premium) */
        body.theme-male-dark { --bg-body: #0f172a; --bg-card: rgba(30, 41, 59, 0.95); --text-main: #f8fafc; --text-muted: #94a3b8; --primary: #3b82f6; --border-color: rgba(255, 255, 255, 0.1); }
        body.theme-female-dark { --bg-body: #18181b; --bg-card: rgba(39, 39, 42, 0.95); --text-main: #f4f4f5; --text-muted: #a1a1aa; --primary: #ec4899; --border-color: rgba(255, 255, 255, 0.1); }
        
        /* Glassmorphism Classes */
        .glass-nav { 
            background: var(--bg-card); 
            backdrop-filter: blur(20px); 
            border-bottom: 1px solid var(--border-color); 
        }
        .glass-panel { 
            background: var(--bg-card); 
            backdrop-filter: blur(16px); 
            border: 1px solid var(--border-color); 
            box-shadow: 0 4px 30px rgba(0,0,0,0.05); 
        }
        .glass-drawer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(25px);
            border-left: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.1);
        }

        /* Utilities */
        [x-cloak] { display: none !important; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>

    <script>
        document.body.addEventListener('htmx:configRequest', (event) => {
            event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
        });
    </script>

    {% block extra_css %}{% endblock %}
</head>

<body 
    x-data="{ sidebarOpen: false, profileOpen: false, ziosOpen: false, talkioOpen: false }" 
    class="relative flex flex-col min-h-screen overflow-x-hidden font-sans antialiased"
    style="background-color: var(--bg-body);"
>
    {% include "components/global_loader.html" %}

    <div class="fixed inset-0 z-0 pointer-events-none">
        <div class="absolute top-[-10%] left-[20%] w-[800px] h-[800px] rounded-full mix-blend-multiply filter blur-[120px] opacity-20 animate-float" style="background-color: var(--color-primary)"></div>
        <div class="absolute bottom-[10%] right-[10%] w-[600px] h-[600px] rounded-full mix-blend-multiply filter blur-[120px] opacity-20 animate-float" style="animation-delay: 2s; background-color: var(--color-secondary)"></div>
    </div>

    <nav class="sticky top-0 z-40 w-full px-4 py-2 shadow-sm glass-nav">
        <div class="flex items-center justify-between h-16 mx-auto max-w-7xl">
            {% include 'social/components/navbar/left.html' %}

            {% include 'social/components/navbar/center.html' %}

            {% include 'core/components/navbar/right.html' %}

            {% include 'social/components/navbar/drawers.html' %} 
        </div>
    </nav>

    <div class="relative z-10 flex-1 w-full px-4 pt-6 pb-20 mx-auto max-w-7xl">
        {% block content %}{% endblock %}
    </div>

    <div 
        x-show="talkioOpen" 
        x-transition:enter="transition ease-out duration-300" 
        x-transition:enter-start="translate-x-full" 
        x-transition:enter-end="translate-x-0" 
        x-transition:leave="transition ease-in duration-300" 
        x-transition:leave-start="translate-x-0" 
        x-transition:leave-end="translate-x-full" 
        class="fixed inset-y-0 right-0 z-[60] w-full md:w-[400px] glass-drawer flex flex-col shadow-2xl" 
        style="display: none;" 
        x-cloak
    >
        <div class="flex items-center justify-between px-5 py-4 border-b border-slate-200/50 bg-white/40 backdrop-blur-sm">
            <div class="flex items-center gap-3">
                <img src="{% static 'imgs/talkio/Talkio_logo.png' %}" class="object-contain w-8 h-8">
                <h3 class="font-bold text-slate-800">Talkio</h3>
            </div>
            <button @click="talkioOpen = false" class="flex items-center justify-center w-8 h-8 transition rounded-full hover:bg-rose-50 text-slate-500 hover:text-rose-500">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="relative flex-1 bg-white/30">
            <iframe src="/core/talkio/" class="absolute inset-0 w-full h-full" frameborder="0"></iframe>
        </div>
    </div>

    {% include "core/components/module_switcher.html" %}

    <script src="{% static 'social/js/social_global.js' %}"></script>

    {% block extra_js %}{% endblock %}
</body>
</html>