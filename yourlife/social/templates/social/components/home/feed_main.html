{% load static %}

<div class="w-full col-span-1 pb-20 space-y-6 lg:col-span-6">

    <div class="relative p-4 overflow-hidden transition-all duration-300 bg-white border shadow-sm border-slate-200 rounded-2xl group hover:shadow-md">
        <div class="flex gap-4">
            <div class="flex-shrink-0">
                <a href="{% url 'yourlife_social:meu_perfil' %}" class="relative block group/avatar">
                    {% if request.user.avatar %}
                        <img src="{{ request.user.avatar.url }}" class="object-cover w-10 h-10 transition-all rounded-full ring-2 ring-transparent group-hover/avatar:ring-indigo-50">
                    {% else %}
                        <div class="flex items-center justify-center w-10 h-10 font-bold rounded-full bg-slate-100 text-slate-400">
                            {{ request.user.first_name|first }}
                        </div>
                    {% endif %}
                </a>
            </div>
            
            <div class="flex-1">
                <div class="w-full bg-slate-50 hover:bg-slate-100 border border-transparent hover:border-slate-200 rounded-full px-4 py-2.5 transition-all cursor-text text-slate-500 hover:text-slate-700 text-sm font-medium flex items-center justify-between group/input mb-3"
                     onclick="document.getElementById('createPostModal').showModal()">
                    <span>No que você está pensando?</span>
                    <i class="fas fa-pen text-slate-300 group-hover/input:text-slate-400"></i>
                </div>

                <div class="flex items-center justify-between px-1">
                    <div class="flex gap-4">
                        <button onclick="document.getElementById('createPostModal').showModal()" class="flex items-center gap-2 text-xs font-semibold transition-colors text-slate-500 hover:text-rose-500">
                            <i class="fas fa-video text-rose-500"></i>
                            <span class="hidden sm:inline">Live</span>
                        </button>
                        <button onclick="document.getElementById('createPostModal').showModal()" class="flex items-center gap-2 text-xs font-semibold transition-colors text-slate-500 hover:text-emerald-500">
                            <i class="fas fa-image text-emerald-500"></i>
                            <span class="hidden sm:inline">Mídia</span>
                        </button>
                        <button onclick="document.getElementById('createPostModal').showModal()" class="flex items-center gap-2 text-xs font-semibold transition-colors text-slate-500 hover:text-amber-500">
                            <i class="far fa-smile text-amber-500"></i>
                            <span class="hidden sm:inline">Vibe</span>
                        </button>
                    </div>
                    
                    <button onclick="document.getElementById('createPostModal').showModal()" 
                            class="bg-slate-900 hover:bg-indigo-600 text-white px-4 py-1.5 rounded-lg text-xs font-bold shadow-md hover:shadow-lg transition-all">
                        Publicar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="flex items-center gap-2 pb-2 overflow-x-auto scrollbar-hide" x-data="{ feedFilter: 'all' }">
        <button @click="feedFilter = 'all'" 
                :class="feedFilter === 'all' ? 'bg-slate-900 text-white shadow-md' : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50'"
                class="px-4 py-1.5 rounded-full text-xs font-bold transition-all whitespace-nowrap">
            Tudo
        </button>
        <button @click="feedFilter = 'friends'" 
                :class="feedFilter === 'friends' ? 'bg-slate-900 text-white shadow-md' : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50'"
                class="px-4 py-1.5 rounded-full text-xs font-bold transition-all whitespace-nowrap">
            Amigos
        </button>
        <button @click="feedFilter = 'school'" 
                :class="feedFilter === 'school' ? 'bg-indigo-600 text-white shadow-md' : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50'"
                class="px-4 py-1.5 rounded-full text-xs font-bold transition-all whitespace-nowrap flex items-center gap-2">
            Escola <span class="bg-indigo-50 text-indigo-600 px-1.5 rounded text-[9px] uppercase tracking-wider">Novo</span>
        </button>
        <button @click="feedFilter = 'media'" 
                :class="feedFilter === 'media' ? 'bg-slate-900 text-white shadow-md' : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50'"
                class="px-4 py-1.5 rounded-full text-xs font-bold transition-all whitespace-nowrap">
            Mídia
        </button>
    </div>

    <div class="space-y-6 min-h-[500px]">
        {% for post in posts %}
            {% include 'social/feed/post_card.html' with post=post %}
        {% empty %}
            <div class="flex flex-col items-center justify-center py-20 text-center">
                <div class="flex items-center justify-center w-20 h-20 mb-4 border rounded-full bg-slate-50 border-slate-100">
                    <i class="text-3xl fas fa-stream text-slate-300"></i>
                </div>
                <h3 class="mb-1 text-sm font-bold text-slate-800">Seu feed está silencioso</h3>
                <p class="text-slate-400 text-xs mb-6 max-w-[200px] mx-auto">Siga seus amigos ou entre em comunidades para ver as novidades.</p>
                <a href="{% url 'yourlife_social:explore' %}" class="px-5 py-2 rounded-lg bg-indigo-600 text-white font-bold text-xs shadow-md hover:bg-indigo-700 transition-all hover:-translate-y-0.5">
                    Explorar Comunidade
                </a>
            </div>
        {% endfor %}
    </div>

</div>