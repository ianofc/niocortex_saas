{% load static %}

<div x-data="{ feedTab: 'foryou' }" class="relative w-full bg-transparent transition-all duration-500">

    <div class="relative w-full mb-12 group">
        <div class="absolute -inset-1 bg-gradient-to-r from-indigo-200/20 to-purple-200/20 rounded-[3rem] blur-xl opacity-0 group-hover:opacity-100 transition duration-1000"></div>
        
        <div class="glass-clean relative p-8 transition-all duration-500 rounded-[3rem] hover:scale-[1.01]">
            <div class="flex items-center gap-6 mb-8">
                <div class="relative w-16 h-16 shrink-0 rounded-2xl p-[2px] bg-gradient-to-br from-white via-indigo-200 to-white shadow-sm">
                    <div class="w-full h-full overflow-hidden bg-white/40 border border-white/40 rounded-[0.9rem]">
                        {% if request.user.profile.avatar %}
                            <img src="{{ request.user.profile.avatar.url }}" class="object-cover w-full h-full">
                        {% else %}
                            <div class="flex items-center justify-center w-full h-full font-black text-indigo-500 bg-white/50 text-lg">
                                {{ request.user.first_name|first|upper }}
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <button onclick="document.getElementById('createPostModal').showModal()" 
                        class="flex-1 px-8 py-5 text-lg text-left transition-all duration-300 border border-white/40 bg-white/30 hover:bg-white/50 text-slate-500 rounded-[1.5rem] outline-none shadow-inner">
                    O que está processando, {{ request.user.first_name }}?
                </button>
            </div>

            <div class="flex items-center justify-between px-2 pt-6 border-t border-white/30">
                <div class="flex gap-6">
                    <button class="flex items-center gap-3 px-5 py-2.5 rounded-2xl hover:bg-indigo-500/10 text-slate-600 transition-all group/btn">
                        <i class="text-2xl text-emerald-500/80 fas fa-image group-hover/btn:scale-110 transition-transform"></i>
                        <span class="text-sm font-black uppercase tracking-widest opacity-70">Mídia</span>
                    </button>
                    <button class="flex items-center gap-3 px-5 py-2.5 rounded-2xl hover:bg-pink-500/10 text-slate-600 transition-all group/btn">
                        <i class="text-2xl text-rose-500/80 fas fa-bolt group-hover/btn:scale-110 transition-transform"></i>
                        <span class="text-sm font-black uppercase tracking-widest opacity-70">Insights</span>
                    </button>
                </div>
                
                <button class="px-10 py-4 text-white font-black text-xs uppercase tracking-[0.3em] transition-all bg-slate-900 rounded-[1.2rem] shadow-2xl hover:bg-indigo-600 active:scale-95">
                    Publicar
                </button>
            </div>
        </div>
    </div>

    <div class="sticky top-4 z-30 flex items-center justify-center gap-16 mb-12 py-2">
        <button @click="feedTab = 'foryou'" 
                hx-get="{% url 'yourlife_social:home_feed_foryou' %}"
                hx-target="#feed-content-list" 
                hx-swap="innerHTML transition:true"
                hx-indicator="#feed-loader"
                :class="feedTab === 'foryou' ? 'text-indigo-600 scale-110' : 'text-slate-400 scale-100 hover:text-slate-600'"
                class="relative pb-2 text-[11px] font-black uppercase tracking-[0.4em] transition-all outline-none group">
            Para Você
            <div :class="feedTab === 'foryou' ? 'w-full opacity-100' : 'w-0 opacity-0'" class="absolute -bottom-1 left-0 h-[3px] bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500 rounded-full"></div>
        </button>
        
        <button @click="feedTab = 'following'"
                hx-get="{% url 'yourlife_social:home_feed_following' %}"
                hx-target="#feed-content-list"
                hx-swap="innerHTML transition:true"
                hx-indicator="#feed-loader"
                :class="feedTab === 'following' ? 'text-indigo-600 scale-110' : 'text-slate-400 scale-100 hover:text-slate-600'"
                class="relative pb-2 text-[11px] font-black uppercase tracking-[0.4em] transition-all outline-none group">
            Seguindo
            <div :class="feedTab === 'following' ? 'w-full opacity-100' : 'w-0 opacity-0'" class="absolute -bottom-1 left-0 h-[3px] bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500 rounded-full"></div>
        </button>
    </div>

    <div id="feed-content-list" class="feed-fade-in pb-32 space-y-14">
        {% include 'social/components/home/feed_list_content.html' with posts=posts %}
    </div>
    
    <div id="feed-loader" class="flex justify-center py-16 htmx-indicator">
        <div class="flex items-center gap-4">
            <div class="w-2.5 h-2.5 bg-indigo-500/40 rounded-full animate-pulse"></div>
            <div class="w-3 h-3 bg-indigo-500/60 rounded-full animate-pulse [animation-delay:0.2s]"></div>
            <div class="w-2.5 h-2.5 bg-indigo-500/40 rounded-full animate-pulse [animation-delay:0.4s]"></div>
        </div>
   </div>

</div>