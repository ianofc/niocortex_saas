{% load static %}

<aside class="sticky hidden space-y-6 lg:block lg:col-span-3 top-24">
    <div
        class="relative w-full max-w-sm mx-auto overflow-hidden font-sans text-gray-800 transition-all duration-500 transform bg-white shadow-xl hover:shadow-2xl rounded-3xl group hover:-translate-y-2">

        <div class="absolute inset-0 z-0 bg-gradient-to-tr from-indigo-50 via-white to-purple-50 opacity-60"></div>
        <div
            class="absolute w-48 h-48 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -top-10 -right-10 animate-blob">
        </div>
        <div
            class="absolute w-48 h-48 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 top-20 -left-10 animate-blob animation-delay-2000">
        </div>

        <div class="relative z-10 flex flex-col items-center p-6">

            <div class="relative mb-5 transition-transform duration-500 ease-out group-hover:scale-105">
                <div
                    class="absolute inset-0 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-[3px] opacity-80 blur-[2px] group-hover:blur-[4px] transition-all duration-500">
                </div>
                <div
                    class="absolute inset-0 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-[3px] opacity-100">
                </div>

                <div class="relative p-[3px] bg-white rounded-full">
                    {% if request.user.avatar %}
                    <img src="{{ request.user.avatar.url }}" alt="{{ request.user.username }}"
                        class="object-cover w-24 h-24 rounded-full shadow-inner bg-slate-50">
                    {% else %}
                    <div
                        class="flex items-center justify-center w-24 h-24 text-3xl font-black tracking-tighter text-transparent rounded-full bg-clip-text bg-gradient-to-br from-indigo-600 to-purple-600 bg-slate-100">
                        {{ request.user.first_name|first|upper }}
                    </div>
                    {% endif %}
                </div>

                <div
                    class="absolute bottom-1 right-1 translate-x-1 translate-y-1 bg-white p-[3px] rounded-full shadow-sm">
                    <div class="w-4 h-4 border-2 border-white rounded-full shadow-inner bg-emerald-400 animate-pulse">
                    </div>
                </div>
            </div>

            <div class="mb-5 space-y-1 text-center">
                <h2
                    class="text-xl font-bold tracking-tight transition-all duration-300 text-slate-800 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-indigo-600 group-hover:to-purple-600">
                    {{ request.user.get_full_name }}
                </h2>
                <div
                    class="inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold border rounded-full bg-slate-100/80 backdrop-blur-sm text-slate-500 border-slate-200/50">
                    <span>@{{ request.user.username }}</span>
                    {% if request.user.is_verified %}
                    <svg class="w-3 h-3 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd" />
                    </svg>
                    {% endif %}
                </div>
            </div>

            <div class="relative w-full mb-6 group/bio">
                <div
                    class="absolute inset-0 transition-all duration-300 transform scale-95 opacity-0 bg-gradient-to-r from-indigo-50/50 to-purple-50/50 rounded-xl group-hover/bio:scale-100 group-hover/bio:opacity-100">
                </div>
                <p class="relative px-2 py-1 text-sm leading-relaxed text-center text-slate-600 line-clamp-2">
                    {{ request.user.profile.bio|default:"Criando o futuro, pixel por pixel. ðŸš€âœ¨" }}
                </p>
            </div>

            <div class="relative flex items-center justify-center w-full gap-8 mb-6">
                <div
                    class="absolute h-px top-1/2 left-4 right-4 bg-gradient-to-r from-transparent via-slate-200 to-transparent">
                </div>

                <div class="relative z-10 flex gap-8 px-2 bg-white">
                    <div
                        class="flex flex-col items-center transition-transform duration-300 cursor-pointer group/stat hover:-translate-y-1">
                        <span
                            class="text-lg font-black transition-colors text-slate-800 group-hover/stat:text-indigo-600">1.2k</span>
                        <span
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-widest group-hover/stat:text-indigo-400">Seguidores</span>
                    </div>
                    <div class="w-px h-8 bg-slate-100"></div>
                    <div
                        class="flex flex-col items-center transition-transform duration-300 cursor-pointer group/stat hover:-translate-y-1">
                        <span
                            class="text-lg font-black transition-colors text-slate-800 group-hover/stat:text-purple-600">450</span>
                        <span
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-widest group-hover/stat:text-purple-400">Seguindo</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center w-full gap-3">
                <a href="{% url 'yourlife_social:profile_detail' request.user.username %}"
                    class="flex-1 relative overflow-hidden rounded-xl bg-slate-900 text-white font-bold text-sm py-3 px-4 shadow-lg shadow-slate-900/20 hover:shadow-slate-900/40 hover:scale-[1.02] active:scale-95 transition-all duration-300 group/btn">
                    <div
                        class="absolute inset-0 w-full h-full transition-opacity duration-300 opacity-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 group-hover/btn:opacity-100">
                    </div>
                    <span class="relative z-10 flex items-center justify-center gap-2">
                        Ver Perfil <i
                            class="text-xs transition-transform fas fa-arrow-right opacity-70 group-hover/btn:translate-x-1"></i>
                    </span>
                </a>

                <button
                    class="relative p-3 transition-all duration-300 border rounded-xl bg-slate-50 text-slate-500 border-slate-200 hover:bg-white hover:text-indigo-600 hover:border-indigo-200 hover:shadow-md active:scale-90 group/settings">
                    <i class="text-sm transition-transform duration-500 fas fa-cog group-hover/settings:rotate-90"></i>
                </button>
            </div>

        </div>

        <div
            class="absolute bottom-0 left-0 w-full h-1 transition-opacity duration-500 opacity-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 group-hover:opacity-100">
        </div>
    </div>

    <style>
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        .animation-delay-2000 {
            animation-delay: 2s;
        }
    </style>

    <nav class="bg-white/70 backdrop-blur-xl border border-white/60 rounded-[2rem] p-4 shadow-sm space-y-6">

        <div>
            <h3 class="px-4 mb-2 text-[10px] font-black uppercase text-slate-400 tracking-widest">Principal</h3>
            <ul class="space-y-1">
                <li>
                    <a href="{% url 'yourlife_social:home' %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center transition-transform fas fa-home group-hover:scale-110"></i>
                        <span>Feed</span>
                    </a>
                </li>
                <li>
                    <a href="#"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center transition-transform fas fa-compass group-hover:scale-110"></i>
                        <span>Explorar</span>
                    </a>
                </li>
                {% if 'ALUNO' in user.role or 'PROFESSOR' in user.role %}
                <li>
                    <a href="{% if 'PROFESSOR' in user.role %}{% url 'lumenios:dashboard_professor' %}{% else %}{% url 'lumenios:dashboard_aluno' %}{% endif %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-gradient-to-r hover:from-indigo-500 hover:to-purple-500 hover:text-white transition-all font-medium group">
                        <i class="w-5 text-center transition-transform fas fa-graduation-cap group-hover:scale-110"></i>
                        <span>EspaÃ§o Escolar</span>
                    </a>
                </li>
                {% endif %}
            </ul>
        </div>

        <div>
            <h3 class="px-4 mb-2 text-[10px] font-black uppercase text-slate-400 tracking-widest">Social</h3>
            <ul class="space-y-1">
                <li>
                    <a href="{% url 'yourlife_social:groups_list' %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center transition-transform fas fa-users group-hover:scale-110"></i>
                        <span>Comunidades</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'yourlife_social:events_list' %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center transition-transform fas fa-calendar-alt group-hover:scale-110"></i>
                        <span>Eventos</span>
                    </a>
                </li>
            </ul>
        </div>

        {% if 'ALUNO' in user.role or 'PROFESSOR' in user.role %}
        <div>
            <h3 class="px-4 mb-2 text-[10px] font-black uppercase text-slate-400 tracking-widest">Ferramentas</h3>
            <ul class="space-y-1">

                {% if 'PROFESSOR' in user.role %}
                <li>
                    <a href="{% url 'pedagogico:listar_turmas' %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center fas fa-chalkboard-user"></i>
                        <span>Minhas Turmas</span>
                    </a>
                </li>
                <li>
                    <a href="#"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center fas fa-file-pen"></i>
                        <span>Planejamento</span>
                    </a>
                </li>

                {% elif 'ALUNO' in user.role %}
                <li>
                    <a href="{% url 'core:student_subjects' %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center fas fa-book"></i>
                        <span>Disciplinas</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'core:student_grades' %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center fas fa-chart-bar"></i>
                        <span>Boletim</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'core:student_calendar' %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center fas fa-calendar-day"></i>
                        <span>Agenda</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'core:student_library' %}"
                        class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 transition-all font-medium group">
                        <i class="w-5 text-center fas fa-book-reader"></i>
                        <span>Biblioteca</span>
                    </a>
                </li>
                {% endif %}

            </ul>
        </div>
        {% endif %}

    </nav>

</aside>