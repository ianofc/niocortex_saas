{% load static %}

<aside class="sticky hidden pl-4 space-y-6 xl:block xl:col-span-3 top-24">

    <div
        class="relative w-full max-w-sm mx-auto overflow-hidden font-sans text-gray-800 transition-all duration-500 transform bg-white shadow-xl hover:shadow-2xl rounded-3xl group hover:-translate-y-2">

        <div class="absolute inset-0 z-0 bg-gradient-to-tr from-indigo-50 via-white to-purple-50 opacity-60"></div>
        <div
            class="absolute w-48 h-48 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -top-10 -right-10 animate-blob">
        </div>
        <div
            class="absolute w-48 h-48 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 top-20 -left-10 animate-blob animation-delay-2000">
        </div>

        <div class="relative z-10 flex flex-col items-center p-6">

            <div class="relative mb-5 transition-transform duration-500 ease-out group-hover:scale-105">
                <div
                    class="absolute inset-0 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-[3px] opacity-80 blur-[2px] group-hover:blur-[4px] transition-all duration-500">
                </div>
                <div
                    class="absolute inset-0 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-[3px] opacity-100">
                </div>

                <div class="relative p-[3px] bg-white rounded-full">
                    {% if request.user.avatar %}
                    <img src="{{ request.user.avatar.url }}" alt="{{ request.user.username }}"
                        class="object-cover w-24 h-24 rounded-full shadow-inner bg-slate-50">
                    {% else %}
                    <div
                        class="flex items-center justify-center w-24 h-24 text-3xl font-black tracking-tighter text-transparent rounded-full bg-clip-text bg-gradient-to-br from-indigo-600 to-purple-600 bg-slate-100">
                        {{ request.user.first_name|first|upper }}
                    </div>
                    {% endif %}
                </div>

                <div
                    class="absolute bottom-1 right-1 translate-x-1 translate-y-1 bg-white p-[3px] rounded-full shadow-sm">
                    <div class="w-4 h-4 border-2 border-white rounded-full shadow-inner bg-emerald-400 animate-pulse">
                    </div>
                </div>
            </div>

            <div class="mb-5 space-y-1 text-center">
                <h2
                    class="text-xl font-bold tracking-tight transition-all duration-300 text-slate-800 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-indigo-600 group-hover:to-purple-600">
                    {{ request.user.get_full_name }}
                </h2>
                <div
                    class="inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold border rounded-full bg-slate-100/80 backdrop-blur-sm text-slate-500 border-slate-200/50">
                    <span>@{{ request.user.username }}</span>
                    {% if request.user.is_verified %}
                    <svg class="w-3 h-3 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd" />
                    </svg>
                    {% endif %}
                </div>
            </div>

            <div class="relative w-full mb-6 group/bio">
                <div
                    class="absolute inset-0 transition-all duration-300 transform scale-95 opacity-0 bg-gradient-to-r from-indigo-50/50 to-purple-50/50 rounded-xl group-hover/bio:scale-100 group-hover/bio:opacity-100">
                </div>
                <p class="relative px-2 py-1 text-sm leading-relaxed text-center text-slate-600 line-clamp-2">
                    {{ request.user.profile.bio|default:"Criando o futuro, pixel por pixel. ðŸš€âœ¨" }}
                </p>
            </div>

            <div class="relative flex items-center justify-center w-full gap-8 mb-6">
                <div
                    class="absolute h-px top-1/2 left-4 right-4 bg-gradient-to-r from-transparent via-slate-200 to-transparent">
                </div>

                <div class="relative z-10 flex gap-8 px-2 bg-white">
                    <div
                        class="flex flex-col items-center transition-transform duration-300 cursor-pointer group/stat hover:-translate-y-1">
                        <span
                            class="text-lg font-black transition-colors text-slate-800 group-hover/stat:text-indigo-600">1.2k</span>
                        <span
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-widest group-hover/stat:text-indigo-400">Seguidores</span>
                    </div>
                    <div class="w-px h-8 bg-slate-100"></div>
                    <div
                        class="flex flex-col items-center transition-transform duration-300 cursor-pointer group/stat hover:-translate-y-1">
                        <span
                            class="text-lg font-black transition-colors text-slate-800 group-hover/stat:text-purple-600">450</span>
                        <span
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-widest group-hover/stat:text-purple-400">Seguindo</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center w-full gap-3">
                <a href="{% url 'yourlife_social:profile_detail' request.user.username %}"
                    class="flex-1 relative overflow-hidden rounded-xl bg-slate-900 text-white font-bold text-sm py-3 px-4 shadow-lg shadow-slate-900/20 hover:shadow-slate-900/40 hover:scale-[1.02] active:scale-95 transition-all duration-300 group/btn">
                    <div
                        class="absolute inset-0 w-full h-full transition-opacity duration-300 opacity-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 group-hover/btn:opacity-100">
                    </div>
                    <span class="relative z-10 flex items-center justify-center gap-2">
                        Ver Perfil <i
                            class="text-xs transition-transform fas fa-arrow-right opacity-70 group-hover/btn:translate-x-1"></i>
                    </span>
                </a>

                <button
                    class="relative p-3 transition-all duration-300 border rounded-xl bg-slate-50 text-slate-500 border-slate-200 hover:bg-white hover:text-indigo-600 hover:border-indigo-200 hover:shadow-md active:scale-90 group/settings">
                    <i class="text-sm transition-transform duration-500 fas fa-cog group-hover/settings:rotate-90"></i>
                </button>
            </div>

        </div>

        <div
            class="absolute bottom-0 left-0 w-full h-1 transition-opacity duration-500 opacity-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 group-hover:opacity-100">
        </div>
    </div>

    <style>
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        .animation-delay-2000 {
            animation-delay: 2s;
        }
    </style>
    
    <div class="relative overflow-hidden rounded-[2rem] bg-[#1a1b2e] p-6 text-white shadow-2xl transition-transform duration-500 hover:scale-[1.02] group border border-slate-700/50">
        
        <div class="absolute w-32 h-32 transition-colors duration-500 rounded-full -right-6 -top-6 bg-violet-600/40 blur-3xl group-hover:bg-violet-500/50"></div>
        <div class="absolute w-32 h-32 rounded-full -left-6 -bottom-6 bg-indigo-500/20 blur-3xl"></div>
        
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>

        <div class="relative z-10 flex flex-col h-full justify-between min-h-[140px]">
            <div class="flex items-start justify-between">
                <i class="text-3xl transition-colors fas fa-fingerprint text-slate-600 group-hover:text-violet-400"></i>
                <div class="relative w-12 overflow-hidden border rounded-lg shadow-md h-9 bg-gradient-to-tr from-yellow-200 via-yellow-400 to-orange-500 opacity-90 border-white/20">
                    <div class="absolute inset-0 bg-white/30 skew-x-12 translate-x-[-150%] animate-[shimmer_3s_infinite]"></div>
                </div>
            </div>

            <div class="mt-4">
                <h3 class="text-lg font-bold tracking-wide text-white truncate font-display drop-shadow-md">
                    {{ request.user.get_full_name|upper }}
                </h3>
                <p class="text-[10px] font-bold tracking-[0.2em] uppercase text-indigo-300 mt-1">
                    {{ request.user.role|default:"MEMBER" }}
                </p>
            </div>

            <div class="flex items-end justify-between mt-6 transition-opacity opacity-60 group-hover:opacity-100">
                <div class="flex flex-col">
                    <span class="text-[8px] uppercase tracking-wider">Valid Thru</span>
                    <span class="font-mono text-xs">12/26</span>
                </div>
                <i class="text-lg rotate-90 fas fa-wifi"></i>
            </div>
        </div>
    </div>
    
    <div class="bg-white/70 backdrop-blur-xl border border-white/60 rounded-[2rem] p-6 shadow-sm relative overflow-hidden group">
        <div class="flex items-center justify-between mb-3">
            <h4 class="flex items-center gap-2 text-xs font-black tracking-widest uppercase text-slate-600">
                <div class="p-1.5 bg-indigo-100 rounded-lg">
                    <img src="{% static 'imgs/talkio/Talkio_logo.png' %}" class="object-contain w-4 h-4"> 
                </div>
                Talkio AI
            </h4>
            <span class="relative flex h-2.5 w-2.5">
                <span class="absolute inline-flex w-full h-full rounded-full opacity-75 animate-ping bg-emerald-400"></span>
                <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500"></span>
            </span>
        </div>
        
        <p class="mb-5 text-xs font-medium leading-relaxed text-slate-500">
            Seu assistente pessoal estÃ¡ pronto para ajudar nos estudos ou conversar.
        </p>
        
        <button @click="$store.nav.drawers.talkio = true" 
                class="w-full py-3 bg-white border border-indigo-100 rounded-xl text-[11px] font-bold uppercase tracking-widest text-indigo-600 hover:bg-indigo-600 hover:text-white hover:border-indigo-600 transition-all duration-300 shadow-sm hover:shadow-indigo-200 hover:shadow-lg group/btn">
            <span class="flex items-center justify-center gap-2">
                Iniciar Conversa <i class="transition-transform fas fa-arrow-right group-hover/btn:translate-x-1"></i>
            </span>
        </button>
    </div>

    <div class="bg-white/70 backdrop-blur-xl border border-white/60 rounded-[2rem] p-6 shadow-sm">
        <h4 class="font-black text-slate-400 mb-5 text-[10px] uppercase tracking-[0.2em] flex items-center gap-2">
            <i class="text-orange-400 fas fa-fire"></i> Em Alta
        </h4>
        
        <div class="space-y-5">
            <a href="#" class="block group">
                <div class="flex items-center justify-between mb-1">
                    <p class="text-sm font-bold transition-colors text-slate-700 group-hover:text-indigo-600">#SemanaDeProvas</p>
                    <i class="text-xs transition-opacity opacity-0 fas fa-chart-line text-emerald-400 group-hover:opacity-100"></i>
                </div>
                <p class="text-[10px] font-medium text-slate-400">12.5k posts â€¢ EducaÃ§Ã£o</p>
            </a>

            <a href="#" class="block group">
                <div class="flex items-center justify-between mb-1">
                    <p class="text-sm font-bold transition-colors text-slate-700 group-hover:text-indigo-600">#NioCortexLaunch</p>
                    <span class="bg-indigo-100 text-indigo-600 text-[9px] font-bold px-1.5 py-0.5 rounded">NEW</span>
                </div>
                <p class="text-[10px] font-medium text-slate-400">5.3k posts â€¢ Tecnologia</p>
            </a>

            <a href="#" class="block group">
                <div class="flex items-center justify-between mb-1">
                    <p class="text-sm font-bold transition-colors text-slate-700 group-hover:text-indigo-600">#DesignTrends</p>
                </div>
                <p class="text-[10px] font-medium text-slate-400">3.1k posts â€¢ Arte</p>
            </a>
        </div>
        
        <button class="w-full mt-6 text-xs font-bold text-center transition-colors text-slate-400 hover:text-indigo-600">
            Ver tudo
        </button>
    </div>

</aside>