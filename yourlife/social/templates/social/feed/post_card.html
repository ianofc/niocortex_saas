{% load static %}

<div class="mb-4 overflow-hidden transition-shadow duration-200 bg-white border border-gray-100 shadow-sm rounded-2xl hover:shadow-md">
    
    <div class="flex items-start justify-between p-4">
        <div class="flex gap-3">
            <a href="{% url 'yourlife_social:profile_detail' post.autor.username %}" class="shrink-0 group">
                {% if post.autor.avatar %}
                    <img src="{{ post.autor.avatar.url }}" class="object-cover w-10 h-10 transition-all rounded-full ring-2 ring-transparent group-hover:ring-indigo-100">
                {% else %}
                    <div class="flex items-center justify-center w-10 h-10 text-xs font-bold rounded-full bg-slate-200 text-slate-500">
                        {{ post.autor.first_name|first }}
                    </div>
                {% endif %}
            </a>
            
            <div class="flex flex-col">
                <a href="{% url 'yourlife_social:profile_detail' post.autor.username %}" class="font-bold text-slate-900 hover:underline text-[15px] leading-tight">
                    {{ post.autor.get_full_name|default:post.autor.username }}
                </a>
                <div class="flex items-center gap-1 text-xs text-slate-500">
                    <span>@{{ post.autor.username }}</span>
                    <span>Â·</span>
                    <span>{{ post.data_criacao|timesince }}</span>
                </div>
            </div>
        </div>
        
        {% if not post.is_system_event %}
        <button class="p-2 transition-colors rounded-full text-slate-400 hover:text-indigo-600 hover:bg-indigo-50">
            <i class="fas fa-ellipsis-h"></i>
        </button>
        {% endif %}
    </div>

    {% if post.conteudo %}
        <div class="px-4 pb-3">
            <p class="text-[15px] text-slate-900 whitespace-pre-line leading-relaxed">{{ post.conteudo }}</p>
        </div>
    {% endif %}

    {% if post.imagem %}
    <div class="w-full mt-1 bg-slate-50 border-y border-slate-100">
        {% if post.is_system_event %}
            <img src="{% static post.imagem %}" class="w-full h-auto max-h-[550px] object-contain mx-auto" alt="Imagem do Sistema">
        {% else %}
            <img src="{{ post.imagem.url }}" class="w-full h-auto max-h-[550px] object-cover" alt="Foto do Post">
        {% endif %}
    </div>
    {% endif %}

    <div class="flex items-center justify-between px-4 py-3 text-slate-500">
        
        <button hx-post="{% url 'yourlife_social:toggle_like' post.id %}" 
                hx-target="#like-cnt-{{ post.id }}"
                class="flex items-center gap-2 transition-colors group hover:text-pink-600">
            <div class="p-2 transition-colors rounded-full group-hover:bg-pink-50">
                <i class="text-lg far fa-heart"></i>
            </div>
            <span id="like-cnt-{{ post.id }}" class="text-xs font-bold">{{ post.total_likes|default:"0" }}</span>
        </button>
        
        <button class="flex items-center gap-2 transition-colors group hover:text-blue-500">
            <div class="p-2 transition-colors rounded-full group-hover:bg-blue-50">
                <i class="text-lg far fa-comment"></i>
            </div>
            <span class="text-xs font-bold">{{ post.total_comentarios|default:"0" }}</span>
        </button>
        
        <button class="flex items-center gap-2 transition-colors group hover:text-green-500">
            <div class="p-2 transition-colors rounded-full group-hover:bg-green-50">
                <i class="text-lg far fa-share-square"></i>
            </div>
        </button>
        
    </div>

</div>
