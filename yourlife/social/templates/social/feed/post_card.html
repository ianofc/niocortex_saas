{% load static %}

<div class="mb-5 overflow-hidden transition-all border shadow-sm bg-white/90 backdrop-blur-sm border-white/60 rounded-2xl hover:shadow-md">
    
    <div class="flex items-start justify-between p-4">
        <div class="flex gap-3">
            <a href="{% url 'yourlife_social:profile_detail' post.autor.username %}" class="shrink-0">
                {% if post.autor.avatar %}
                    <img src="{{ post.autor.avatar.url }}" class="object-cover w-10 h-10 rounded-full ring-2 ring-white">
                {% else %}
                    <div class="flex items-center justify-center w-10 h-10 text-xs font-bold rounded-full bg-slate-100 text-slate-500">
                        {{ post.autor.first_name|first }}
                    </div>
                {% endif %}
            </a>
            <div>
                <a href="{% url 'yourlife_social:profile_detail' post.autor.username %}" class="font-bold text-slate-900 hover:text-indigo-600 transition-colors text-[15px]">
                    {{ post.autor.get_full_name|default:post.autor.username }}
                </a>
                <div class="flex items-center gap-1 text-xs text-slate-500">
                    <span>{{ post.data_criacao|timesince }} atrás</span>
                    {% if post.location %}
                        <span>• {{ post.location }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
        
        {% if not post.is_system_event %}
        <button class="p-2 transition-colors rounded-full text-slate-400 hover:text-slate-600 hover:bg-slate-100">
            <i class="fas fa-ellipsis-h"></i>
        </button>
        {% endif %}
    </div>

    {% if post.conteudo %}
        <div class="px-4 pb-3">
            <p class="text-[15px] text-slate-800 whitespace-pre-wrap leading-relaxed">{{ post.conteudo }}</p>
        </div>
    {% endif %}

    {% if post.imagem %}
    <div class="w-full bg-slate-50 border-y border-slate-100">
        {% if post.is_system_event %}
            <img src="{% static post.imagem %}" class="w-full h-auto max-h-[500px] object-contain mx-auto" alt="Evento">
        {% else %}
            <img src="{{ post.imagem.url }}" class="w-full h-auto max-h-[600px] object-cover" alt="Post">
        {% endif %}
    </div>
    {% endif %}

    <div class="flex items-center justify-between px-4 py-3 border-t border-slate-100/50">
        <div class="flex gap-4">
            <button hx-post="{% url 'yourlife_social:toggle_like' post.id %}" 
                    hx-target="#like-count-{{ post.id }}"
                    class="flex items-center gap-2 transition-colors text-slate-500 hover:text-red-500 group">
                <i class="text-xl transition-transform far fa-heart group-hover:scale-110"></i>
                <span id="like-count-{{ post.id }}" class="text-sm font-medium">{{ post.total_likes }}</span>
            </button>
            
            <button class="flex items-center gap-2 transition-colors text-slate-500 hover:text-indigo-500 group">
                <i class="text-xl transition-transform far fa-comment group-hover:scale-110"></i>
                <span class="text-sm font-medium">{{ post.total_comentarios }}</span>
            </button>
        </div>
        
        <button class="transition-colors text-slate-400 hover:text-indigo-500">
            <i class="text-xl far fa-share-square"></i>
        </button>
    </div>

</div>
