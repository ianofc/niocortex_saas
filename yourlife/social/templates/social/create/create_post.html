{% load static %}

<dialog id="createPostModal" class="w-full max-w-2xl p-0 bg-transparent modal backdrop:bg-black/60 backdrop:backdrop-blur-sm open:animate-fade-in focus:outline-none">
    
    <div class="relative w-full bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-white/50">
        
        <div class="flex items-center justify-between p-6 border-b border-slate-100 bg-slate-50/50">
            <h3 class="text-lg font-black tracking-tight text-slate-700">Criar Publicação</h3>
            <button type="button" onclick="document.getElementById('createPostModal').close()" 
                    class="flex items-center justify-center w-8 h-8 transition-colors rounded-full bg-slate-200 hover:bg-rose-100 hover:text-rose-500">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <form method="POST" enctype="multipart/form-data" action="{% url 'yourlife_social:create_post' %}" class="p-6">
            {% csrf_token %}
            
            <div class="flex gap-4">
                <img src="{{ request.user.profile.avatar.url|default:'https://ui-avatars.com/api/?name='|add:request.user.username }}" 
                     class="object-cover w-10 h-10 rounded-xl">
                
                <textarea name="conteudo" rows="4" 
                          class="w-full text-lg bg-transparent border-none resize-none focus:ring-0 placeholder-slate-400"
                          placeholder="No que você está pensando?"></textarea>
            </div>

            <div id="media-preview" class="flex items-center justify-center hidden mt-4 overflow-hidden rounded-xl bg-black/5 aspect-video text-slate-400">
                <span>Preview da Mídia</span>
            </div>

            <div class="flex items-center justify-between pt-4 mt-6 border-t border-slate-100">
                <div class="flex gap-2">
                    <label class="flex items-center justify-center w-10 h-10 text-green-500 transition-colors rounded-full cursor-pointer hover:bg-green-50">
                        <i class="text-lg fas fa-image"></i>
                        <input type="file" name="imagem" class="hidden" accept="image/*">
                    </label>
                    <label class="flex items-center justify-center w-10 h-10 transition-colors rounded-full cursor-pointer hover:bg-rose-50 text-rose-500">
                        <i class="text-lg fas fa-video"></i>
                        <input type="file" name="video" class="hidden" accept="video/*">
                    </label>
                    <button type="button" class="flex items-center justify-center w-10 h-10 text-indigo-500 transition-colors rounded-full hover:bg-indigo-50">
                        <i class="text-lg fas fa-smile"></i>
                    </button>
                </div>

                <button type="submit" 
                        class="px-8 py-3 font-bold text-white transition-all transform bg-indigo-600 shadow-lg hover:bg-indigo-700 rounded-xl hover:scale-105 active:scale-95 shadow-indigo-500/30">
                    Publicar
                </button>
            </div>
        </form>
    </div>
</dialog>

<style>
    /* Animação do Modal */
    dialog[open] {
        animation: zoomIn 0.2s ease-out forwards;
    }
    dialog::backdrop {
        animation: fadeIn 0.2s ease-out forwards;
    }
    @keyframes zoomIn {
        from { opacity: 0; transform: scale(0.95); }
        to { opacity: 1; transform: scale(1); }
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
</style>
