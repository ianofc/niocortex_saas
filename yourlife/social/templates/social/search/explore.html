{% extends 'social/layout/base_useryourlife.html' %}
{% load static %}

{% block content %}
<div class="min-h-screen pt-20 pb-24 bg-slate-50/50">
    
    <div class="fixed top-0 left-0 right-0 z-40 flex items-center justify-center px-6 py-4 border-b bg-white/80 backdrop-blur-xl border-white/50 lg:ml-72 lg:mr-80">
        <h1 class="text-lg font-black uppercase tracking-[0.2em] text-slate-800">
            Explorar Mídias
        </h1>
    </div>

    <div class="container max-w-6xl px-4 mx-auto mt-6">
        
        <div class="gap-4 space-y-4 columns-2 md:columns-3 lg:columns-4">
            
            {% for item in media_posts %}
                <div class="relative mb-4 overflow-hidden transition-all duration-300 cursor-pointer group break-inside-avoid rounded-2xl hover:shadow-xl hover:-translate-y-1">
                    
                    {% if is_mock %}
                        <img src="{{ item.url }}" class="object-cover w-full h-auto transition-transform duration-700 transform group-hover:scale-110">
                    {% else %}
                        {% if item.video %}
                            <div class="relative w-full aspect-[9/16]">
                                <video src="{{ item.video.url }}" class="object-cover w-full h-full" muted loop onmouseover="this.play()" onmouseout="this.pause()"></video>
                                <div class="absolute flex items-center justify-center w-6 h-6 rounded-full top-2 right-2 bg-black/40 backdrop-blur">
                                    <i class="fas fa-play text-[10px] text-white"></i>
                                </div>
                            </div>
                        {% elif item.imagem %}
                            <img src="{{ item.imagem.url }}" class="object-cover w-full h-auto transition-transform duration-700 transform group-hover:scale-110">
                        {% endif %}
                    {% endif %}

                    <div class="absolute inset-0 flex flex-col justify-end p-4 transition-opacity duration-300 opacity-0 bg-gradient-to-t from-black/80 via-transparent to-transparent group-hover:opacity-100">
                        <div class="flex items-center justify-between text-white">
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 overflow-hidden border rounded-full bg-white/20 backdrop-blur border-white/50">
                                    {% if not is_mock %}
                                        <img src="{{ item.autor.profile.avatar.url|default:'https://ui-avatars.com/api/?name=User' }}" class="object-cover w-full h-full">
                                    {% else %}
                                        <div class="w-full h-full bg-indigo-500"></div>
                                    {% endif %}
                                </div>
                                <span class="text-xs font-bold shadow-black drop-shadow-md">
                                    {% if not is_mock %}{{ item.autor.username }}{% else %}Creator{% endif %}
                                </span>
                            </div>
                            
                            <div class="flex items-center gap-1">
                                <i class="text-xs fas fa-heart"></i>
                                <span class="text-xs font-bold">
                                    {% if not is_mock %}{{ item.likes.count }}{% else %}{{ forloop.counter|add:42 }}{% endif %}
                                </span>
                            </div>
                        </div>
                    </div>

                </div>
            {% endfor %}

        </div>

        {% if not media_posts %}
        <div class="flex flex-col items-center justify-center text-center h-96">
            <div class="flex items-center justify-center w-20 h-20 mb-4 rounded-full bg-slate-200 text-slate-400">
                <i class="text-3xl fas fa-camera"></i>
            </div>
            <h3 class="font-bold text-slate-500">Nenhuma mídia encontrada</h3>
            <p class="text-sm text-slate-400">Seja o primeiro a postar uma foto ou vídeo!</p>
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}
